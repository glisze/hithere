# 20211008 (c) Gunter Liszewski -- current-grub.cfg with linux-for-ak3v
# madeito atemplate

# Set 'root' to the partition that contains /gnu/store.
search --file --set /@/0/gnu/store/7j7cr4gc3yizigpbihljjkjpxyj0zwl8-grub-image.png

if loadfont unicode; then
  set gfxmode=auto
  insmod all_video
  insmod gfxterm
fi

terminal_output gfxterm


insmod png
if background_image /@/0/gnu/store/7j7cr4gc3yizigpbihljjkjpxyj0zwl8-grub-image.png; then
  set color_normal=light-gray/black
  set color_highlight=yellow/black
else
  set menu_color_normal=cyan/blue
  set menu_color_highlight=white/blue
fi
# Localization configuration.
# search --file --set /@/0/gnu/store/28cx8rhl2b87z37iy3xlbdcyi65nb2dp-grub-locales/en@quot.mo
set locale_dir=/@/0/gnu/store/28cx8rhl2b87z37iy3xlbdcyi65nb2dp-grub-locales
set lang=en_GB
insmod keylayouts
keymap /@/0/gnu/store/vy8j47w984f204kylaag31vqasxbf4kj-grub-keymap.gb

set default=0
set timeout=3
menuentry "Gnu Guix: S2: linuc-for-ak3v@5.15-rc4 and i2-initrd.img (experimental)" {
  search --file --set /@/0//gnu/store/6pv85i92krrz9aj5j5clm4xf81a8817s-linux-for-ak3v-v5.15-rc4/bzImage
  linux /@/0//gnu/store/6pv85i92krrz9aj5j5clm4xf81a8817s-linux-for-ak3v-v5.15-rc4/bzImage rdinit=/bin/sh --root=/dev/mapper/HyperVG11-S2 --system=/gnu/store/59fkv388j2ab6jarx1rgw25j93wy3zph-system --load=/gnu/store//gnu/store/q12xaj9p9ykfpmxvw3a1q9wf4b4kb1ma-boot iommu_intel=on vfio.ids=8086:095a,10ec:8168 quiet
  initrd /@/0//gnu/store/wdm2jk5qf6mrplw5hnkbmc281ljgc3xb-raw-initrd/initrd.cpio.gz
}

if [ "${grub_platform}" == efi ]; then
  menuentry "Firmware setup" {
    fwsetup
  }
fi
